{"version":3,"sources":["../directive.js"],"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_hammerjs","require","_hammerjs2","_interopRequireDefault","_lodash","_lodash2","obj","__esModule","default","_toConsumableArray","arr2","from","_toArray","_gestures","_directions","tap","swipe","pan","pinch","press","rotate","isGesture","name","gestureName","toLowerCase","findIndex","item","isDirection","gesture","direction","getGestureWithDirection","_name$split","split","_name$split2","event","readBinding","binding","arg","result","isString","getHandler","handler","isFunction","isObject","parameter","_value","func","funcArguments","slice","apply","options","arguments","myOption","assign","threshold","time","posThreshold","update","el","hammer","__hammer__","Error","_readBinding","isActive","off","on","bind","vNode","_readBinding2","Manager","add","Swipe","_vNode$data$attrs","data","attrs","option","defaultOption","capitalize","unbind","destroy"],"mappings":"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","file":"directive.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * @author Bichi Kim <bichi@live.co.kr>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * @copyright Naree Co.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * @license MIT\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * @module\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */\n\n\nvar _hammerjs = require('hammerjs');\n\nvar _hammerjs2 = _interopRequireDefault(_hammerjs);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\n/**\n * data of gestures\n * @type {Array}\n * @private\n */\nvar _gestures = ['tap', 'pan', 'pinch', 'press', 'rotate', 'swipe'];\n/**\n * data of directions\n * @type {Object}\n * @private\n */\nvar _directions = {\n  tap: [],\n  swipe: ['left', 'right', 'up', 'down'],\n  pan: ['start', 'move', 'end', 'cancel', 'left', 'right', 'up', 'down'],\n  pinch: ['start', 'move', 'end', 'cancel', 'in', 'out'],\n  press: ['up'],\n  rotate: ['start', 'move', 'end', 'cancel']\n  /**\n   * is name of gesture?\n   * @param {String}name\n   * @return {boolean}\n   */\n};var isGesture = function isGesture(name) {\n  if (!name) {\n    return false;\n  }\n  var gestureName = name.toLowerCase();\n  return _lodash2.default.findIndex(_gestures, function (item) {\n    return item === gestureName;\n  }) >= 0;\n};\n/**\n * is name of direction?\n * @param {String}gesture\n * @param {String}direction\n * @return {boolean}\n */\nvar isDirection = function isDirection(gesture, direction) {\n  return _lodash2.default.findIndex(_directions[gesture], function (item) {\n    return item === direction;\n  }) >= 0;\n};\n/**\n * get gesture and event in string gesture-direction\n * @param {String}name\n * @return {{gesture, event}}\n */\nvar getGestureWithDirection = function getGestureWithDirection(name) {\n  if (!name) {\n    return {};\n  }\n\n  var _name$split = name.split('-'),\n      _name$split2 = _slicedToArray(_name$split, 2),\n      gesture = _name$split2[0],\n      direction = _name$split2[1];\n\n  if (!direction || !isGesture(gesture) || !isDirection(gesture, direction)) {\n    return {};\n  }\n  return { gesture: gesture, event: '' + gesture + direction };\n};\n/**\n * get gesture and event\n * @param {Object}binding\n * @return {{gesture, event}}\n */\nvar readBinding = function readBinding(binding) {\n  var gesture = void 0,\n      event = void 0;\n  if (isGesture(binding.arg)) {\n    gesture = binding.arg;\n    event = binding.arg;\n  } else {\n    var result = getGestureWithDirection(binding.arg);\n    gesture = result.gesture;\n    event = result.event;\n  }\n  if (_lodash2.default.isString(gesture)) {\n    gesture.toLowerCase();\n  }\n  return { gesture: gesture, event: event };\n};\n/**\n * get Handler in binding value\n * @param {Object}binding\n * @return {Function|undefined}\n */\nvar getHandler = function getHandler(binding) {\n  var value = binding.value;\n\n  var handler = void 0;\n  if (_lodash2.default.isFunction(value)) {\n    handler = value;\n  } else if (_lodash2.default.isObject(value) && _lodash2.default.isFunction(value.handler)) {\n    handler = function handler() {\n      value.handler(binding.value.parameter);\n    };\n  } else if (_lodash2.default.isArray(value)) {\n    var _value = _toArray(value),\n        func = _value[0],\n        funcArguments = _value.slice(1);\n\n    handler = function handler() {\n      func.apply(undefined, _toConsumableArray(funcArguments));\n    };\n  } else {\n    return;\n  }\n  return handler;\n};\n\n/**\n * directive logic\n * @param {Object}options\n * @return {{update, bind, unbind}}\n */\n\nexports.default = function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var myOption = Object.assign({\n    tap: { threshold: 50, time: 600, posThreshold: 50 }\n  }, options);\n  return {\n    // todo this is not working in Vue2\n    // see https://github.com/vuejs/vue/issues/3309 to support it\n    // acceptStatement: true,\n    update: function update(el, binding) {\n      var hammer = el.__hammer__;\n      if (!hammer) {\n        throw new Error('[v-touch2] no hammer. hammer: ' + hammer);\n      }\n\n      var _readBinding = readBinding(binding),\n          gesture = _readBinding.gesture,\n          event = _readBinding.event;\n\n      if (!gesture || !event) {\n        return;\n      }\n      var isActive = el['__' + gesture + '__'];\n      if (!isActive) {\n        return;\n      }\n      hammer.off(event);\n      var handler = getHandler(binding);\n      if (!handler) {\n        return;\n      }\n      hammer.on(event, handler);\n    },\n    bind: function bind(el, binding, vNode) {\n      var _readBinding2 = readBinding(binding),\n          gesture = _readBinding2.gesture,\n          event = _readBinding2.event;\n\n      if (!gesture || !event) {\n        return;\n      }\n      // hammer\n      if (!el.__hammer__) {\n        el.__hammer__ = new _hammerjs2.default.Manager(el);\n        // Owing to a Hammer bug I add this.\n        // In the Hammer without swipe environment, tap options is not working\n        el.__hammer__.add(new _hammerjs2.default.Swipe());\n      }\n      var hammer = el.__hammer__;\n      // handler\n      var handler = getHandler(binding);\n      if (!handler) {\n        return;\n      }\n      var _vNode$data$attrs = vNode.data.attrs,\n          attrs = _vNode$data$attrs === undefined ? {} : _vNode$data$attrs;\n\n      var option = attrs[gesture + '-options'] || {};\n      var defaultOption = myOption[gesture] || {};\n      Object.assign(option, defaultOption);\n      // init Hammer\n      el['__' + gesture + '__'] = true;\n      hammer.add(new _hammerjs2.default[_lodash2.default.capitalize(gesture)](option));\n      hammer.on(event, handler);\n    },\n    unbind: function unbind(el) {\n      if (el.__hammer__) {\n        el.__hammer__.destroy();\n        el.__hammer__ = null;\n      }\n    }\n  };\n};"]}